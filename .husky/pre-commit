#!/bin/sh

echo "ğŸ” Running pre-commit hook..."

# Check formatting with Prettier
echo "ğŸ“ Checking code formatting..."
if ! yarn format:check; then
    echo "âŒ Formatting errors detected!"
    echo "ğŸ’¡ Run 'yarn format' to fix automatically."
    exit 1
fi
echo "âœ… Code formatting is correct"

# Check TypeScript compilation
echo "ğŸ”§ Checking TypeScript compilation..."
if ! yarn typecheck; then
    echo "âŒ TypeScript compilation errors detected!"
    exit 1
fi
echo "âœ… TypeScript compilation successful"

# Run tests
echo "ğŸ§ª Running tests..."
if ! yarn test:run; then
    echo "âŒ Tests failed!"
    exit 1
fi
echo "âœ… All tests pass"

echo "ğŸ‰ Pre-commit hook completed successfully!"